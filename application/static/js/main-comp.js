var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.checkStringArgs=function(a,c,b){if(null==a)throw new TypeError("The 'this' value for String.prototype."+b+" must not be null or undefined");if(c instanceof RegExp)throw new TypeError("First argument to String.prototype."+b+" must not be a regular expression");return a+""};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,c,b){a!=Array.prototype&&a!=Object.prototype&&(a[c]=b.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,c,b,e){if(c){b=$jscomp.global;a=a.split(".");for(e=0;e<a.length-1;e++){var d=a[e];d in b||(b[d]={});b=b[d]}a=a[a.length-1];e=b[a];c=c(e);c!=e&&null!=c&&$jscomp.defineProperty(b,a,{configurable:!0,writable:!0,value:c})}};
$jscomp.polyfill("String.prototype.repeat",function(a){return a?a:function(a){var b=$jscomp.checkStringArgs(this,null,"repeat");if(0>a||1342177279<a)throw new RangeError("Invalid count value");a|=0;for(var e="";a;)if(a&1&&(e+=b),a>>>=1)b+=b;return e}},"es6","es3");$jscomp.stringPadding=function(a,c){a=void 0!==a?String(a):" ";return 0<c&&a?a.repeat(Math.ceil(c/a.length)).substring(0,c):""};
$jscomp.polyfill("String.prototype.padStart",function(a){return a?a:function(a,b){var e=$jscomp.checkStringArgs(this,null,"padStart");return $jscomp.stringPadding(b,a-e.length)+e}},"es8","es3");$jscomp.findInternal=function(a,c,b){a instanceof String&&(a=String(a));for(var e=a.length,d=0;d<e;d++){var g=a[d];if(c.call(b,g,d,a))return{i:d,v:g}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,b){return $jscomp.findInternal(this,a,b).v}},"es6","es3");
$(function(){function a(e){try{var a=$.datepicker.parseDate("yy-mm-dd",e.value)}catch(g){a=null}return a}var c=$("#from").datepicker({defaultDate:"+1w",changeMonth:!0,numberOfMonths:3,dateFormat:"yy-mm-dd",showAnim:"slide"}).on("change",function(){b.datepicker("option","minDate",a(this))}),b=$("#to").datepicker({defaultDate:"+1w",changeMonth:!0,numberOfMonths:3,dateFormat:"yy-mm-dd",showAnim:"slide"}).on("change",function(){c.datepicker("option","maxDate",a(this))});$("#searcho").click(function(){var a=
$(".ssearchList").val();if("ech"===a){if(""!=$(".fromdate").val()||""!=$(".todate").val())if(""==$(".fromdate").val()){var d="1997-06-05 00:00:00",b=$(".todate").val()+" 23:59:59";$.getJSON($SCRIPT_ROOT+"/daterange",{fromDate:d,toDate:b},function(a){a=$.makeTable(a);$("#searchcontainer").html(a)})}else if(""==$(".todate").val()){d=$(".fromdate").val()+" 00:00:00";var c=new Date;b=String(c.getDate()).padStart(2,"0");var f=String(c.getMonth()+1).padStart(2,"0");c=c.getFullYear();$.getJSON($SCRIPT_ROOT+
"/daterange",{fromDate:d,toDate:c+"-"+f+"-"+b+" 23:59:59"},function(a){a=$.makeTable(a);$("#searchcontainer").html(a)})}else d=$(".fromdate").val()+" 00:00:00",b=$(".todate").val()+" 23:59:59",$.getJSON($SCRIPT_ROOT+"/daterange",{fromDate:d,toDate:b},function(a){a=$.makeTable(a);$("#searchcontainer").html(a)})}else""==$(".fromdate").val()&&""==$(".todate").val()?($("#searchcontainer").empty(),f=$("#searchin").val(),$.getJSON($SCRIPT_ROOT+"/"+a,{search:f},function(a){a=$.makeTable(a);$("#searchcontainer").html(a)})):
""==$(".todate").val()?(d=$(".fromdate").val()+" 00:00:00",c=new Date,b=String(c.getDate()).padStart(2,"0"),f=String(c.getMonth()+1).padStart(2,"0"),c=c.getFullYear(),b=c+"-"+f+"-"+b+" 23:59:59",$("#searchcontainer").empty(),f=$("#searchin").val(),$.getJSON($SCRIPT_ROOT+"/date"+a,{search:f,fromDate:d,toDate:b},function(a){a=$.makeTable(a);$("#searchcontainer").html(a)})):""==$(".fromdate").val()?(d="1997-06-05 00:00:00",b=$(".todate").val()+" 23:59:59",$("#searchcontainer").empty(),f=$("#searchin").val(),
$.getJSON($SCRIPT_ROOT+"/date"+a,{search:f,fromDate:d,toDate:b},function(a){a=$.makeTable(a);$("#searchcontainer").html(a)})):(d=$(".fromdate").val()+" 00:00:00",b=$(".todate").val()+" 23:59:59",$("#searchcontainer").empty(),f=$("#searchin").val(),$.getJSON($SCRIPT_ROOT+"/date"+a,{search:f,fromDate:d,toDate:b},function(a){a=$.makeTable(a);$("#searchcontainer").html(a)}))});$("#saleo").click(function(){var a=$(".ssaleList").val();if("ech"===a){if(""!=$(".fromdate").val()||""!=$(".todate").val())if(""==
$(".fromdate").val()){var d="1997-06-05",b=$(".todate").val();$.getJSON($SCRIPT_ROOT+"/saledaterange",{fromDate:d,toDate:b},function(a){a=$.makeTable(a,!0);$("#salecontainer").html(a)})}else if(""==$(".todate").val()){d=$(".fromdate").val();var c=new Date;b=String(c.getDate()).padStart(2,"0");var f=String(c.getMonth()+1).padStart(2,"0");c=c.getFullYear();$.getJSON($SCRIPT_ROOT+"/saledaterange",{fromDate:d,toDate:c+"-"+f+"-"+b+" 23:59:59"},function(a){a=$.makeTable(a,!0);$("#salecontainer").html(a)})}else d=
$(".fromdate").val(),b=$(".todate").val(),$.getJSON($SCRIPT_ROOT+"/saledaterange",{fromDate:d,toDate:b},function(a){a=$.makeTable(a,!0);$("#salecontainer").html(a)})}else""==$(".fromdate").val()&&""==$(".todate").val()?($("#salecontainer").empty(),f=$("#searchsalein").val(),$.getJSON($SCRIPT_ROOT+"/sale"+a,{search:f},function(a){a=$.makeTable(a,!0);$("#salecontainer").html(a)})):""==$(".todate").val()?(d=$(".fromdate").val(),c=new Date,b=String(c.getDate()).padStart(2,"0"),f=String(c.getMonth()+1).padStart(2,
"0"),c=c.getFullYear(),b=c+"-"+f+"-"+b,$("#salecontainer").empty(),f=$("#searchsalein").val(),$.getJSON($SCRIPT_ROOT+"/datesale"+a,{search:f,fromDate:d,toDate:b},function(a){a=$.makeTable(a,!0);$("#salecontainer").html(a)})):""==$(".fromdate").val()?(d="1997-06-05",b=$(".todate").val(),$("#salecontainer").empty(),f=$("#searchsalein").val(),$.getJSON($SCRIPT_ROOT+"/datesale"+a,{search:f,fromDate:d,toDate:b},function(a){a=$.makeTable(a,!0);$("#salecontainer").html(a)})):(d=$(".fromdate").val(),b=$(".todate").val(),
$("#salecontainer").empty(),f=$("#searchsalein").val(),$.getJSON($SCRIPT_ROOT+"/datesale"+a,{search:f,fromDate:d,toDate:b},function(a){a=$.makeTable(a,!0);$("#salecontainer").html(a)}))});$(".vendorList").on("change",function(){var a=$(".vendorList").val();"ech"!==a&&($("#vendorcontainer").empty(),$.getJSON($SCRIPT_ROOT+"/listvendorarea",{vlist:a},function(a){a=$.makeTable(a);$("#vendorcontainer").html(a)}))});$(".subvendorList").on("change",function(){var a=$(".subvendorList").val();"ech"!==a&&($("#vendorcontainer").empty(),
$.getJSON($SCRIPT_ROOT+"/listsubvendorarea",{svlist:a},function(a){a=$.makeTable(a);$("#vendorcontainer").html(a)}))});$(".ssourcelist").on("change",function(){var a=$(".ssourcelist option:selected").text();"ech"!==a&&($("#searchcontainer").empty(),$.getJSON($SCRIPT_ROOT+"/sourceselect",{source:a},function(a){a=$.makeTable(a);$("#searchcontainer").html(a)}))})});
$("#export").click(function(){var a=[],c=[],b=$(this).attr("class");$("#"+b+" th").each(function(b,e){"Action"!==$(this).text()&&a.push($(this).text())});$("#"+b+" td").each(function(){var a=$(this).text().replace(/,/g,"");"Action"!==a&&c.push(a)});var e=prepCSVRow(a,a.length,"");e=prepCSVRow(c,a.length,e);b=document.createElement("a");e=new Blob(["\ufeff",e]);e=URL.createObjectURL(e);b.href=e;b.download="data.csv";document.body.appendChild(b);b.click();document.body.removeChild(b)});
$.makeTable=function(a,c){c=void 0===c?!1:c;var b=$('<table class="table table-striped" >'),e="<tr scope='row'>",d;for(d in a[0])"lead_id"!==d&&(e+="<th scope='col'>"+d+"</th>");0==c&&(e+="<th scope='col'>Action</th></tr>");$(e).appendTo(b);$.each(a,function(a,e){var d="<tr scope='row'>",g="";$.each(e,function(a,b){"lead_id"!==a?d+="<td>"+b+"</td>":g=b});0==c&&(d+="<td><button type='input' class='editbutton' id='"+g+"'>Action</button></td>");d+="</tr>";$(b).append(d)});return $(b)};
$(document).on("click",".editbutton",function(a){a=[];var c=$(this).attr("id"),b=$(this).closest("tr").find("td");for(i=1;i<b.length-1;i++)a.push(b[i].textContent);a="<h4 align='center'>Input Sale</h4><div id='modalblock'><form id='insale'><strong>Name:<input type='text' name='name' value='"+a[2]+"' /><br/>Policy Name:<input type='text' name='policy' /><br/>Agent:<input type='text' name='agent' /><br/>Customer Price:<input type='text' name='price' /><br/>Down Deposit:<input type='text' name='deposit' /><br/>Term:<input type='text' name='Term' /><br/>Source:<input type='text' name='source' value='"+
a[9]+"' /><br/>Notes(Manual In/Out):<input type='text' name='notes' /><br/>Secondary Notes:<input type='text' name='secnotes' /><br/>Date:<input type='text' name='date' value='"+a[8].substring(0,10)+"' /><br/>Is Teledripped:</strong><input type='checkbox' name='istele'></form></div>";$(".editcontent").empty().html(a);$("#editModal").toggle();$(document).on("click",".btn-success",function(a){a=$("#insale").serializeArray();a[0]=c;a[1]=a[1].value;a[2]=a[2].value;a[3]=a[3].value;a[4]=a[4].value;a[5]=
a[5].value;a[6]=a[6].value;a[7]=a[7].value;a[8]=a[8].value;a[9]=a[9].value;a[10]="undefined"===typeof a[10]?"0":"1";console.dir(a);$.getJSON($SCRIPT_ROOT+"/insertsale",{saleinfo:a},function(a){console.dir(a);1==a?(alert("Success! Reloading page."),location.reload()):alert("There was an error. Please Try again.")})})});$(document).on("click",".btn-info",function(a){$("#editModal").toggle()});function add(a,c){return parseInt(a)+parseInt(c)}
function prepCSVRow(a,c,b){var e="";(function(a,b){var c=[],d=[];a.forEach(function(a,e){0===(e+1)%b?(c.push(a),d.push(c),c=[]):c.push(a)});return d})(a,c).forEach(function(a){a.forEach(function(b,c){e+=b+(c+1===a.length?"":",")});e+="\r\n"});return b+e}var regexLetters=/^([a-zA-Z]+(_[a-zA-Z]+)*)(\s([a-zA-Z]+(_[a-zA-Z]+)*))*$/,regexNumbers=/^(?=.*\d)[\d ]+$/,regexLettersNumbers=/^[a-zA-Z0-9_]+( [a-zA-Z0-9_]+)*$/,regexCvv=/^[0-9]*$/;
